<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Reward System</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function completeAllPendingWithdrawals() {
          let pendingWithdrawals = JSON.parse(localStorage.getItem("pendingWithdrawals")) || [];
          
          pendingWithdrawals.forEach(withdrawal => {
            if (withdrawal.status === "pending") {
              withdrawal.status = "completed";
            }
          });
      
          localStorage.setItem("pendingWithdrawals", JSON.stringify(pendingWithdrawals));
      
          alert("‚úÖ ‡¶∏‡¶¨ ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡¶æ‡¶≤ ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
        }
      
        function notifyAllUsers() {
          let pendingWithdrawals = JSON.parse(localStorage.getItem("pendingWithdrawals")) || [];
      
          pendingWithdrawals.forEach(withdrawal => {
            if (withdrawal.status === "completed") {
              const message = `üéâ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡¶æ‡¶≤ ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!
              
      üí∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: ${withdrawal.amount} Taka
      üìû ‡¶´‡ßã‡¶®: ${withdrawal.phoneNumber}
      üè¶ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°: ${withdrawal.paymentMethod}
      ‚úÖ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: Completed`;
      
              const userChatId = localStorage.getItem("telegramUserId");
      
              if (userChatId) {
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${userChatId}&text=${encodeURIComponent(message)}`)
                  .then(response => response.json())
                  .then(data => console.log("Withdrawal completed message sent:", data))
                  .catch(error => console.error("Error sending completion message:", error));
              } else {
                console.warn("User Telegram ID not found, cannot send message.");
              }
            }
          });
      
          alert("‚úÖ ‡¶∏‡¶¨ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
        }
      
        // ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßã
        completeAllPendingWithdrawals();
        notifyAllUsers();
      </script>      
</head>
<body>
    <div class="container">
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <h1> Dear User Welcome To  Free Income 2025 </h1>
        <h3 id="username">Loading...</h3>
        <div id="custom-alert-container"></div>
        <div class="developer" onclick="window.location.href='https://t.me/thegreekytanvir'">Developer by Tanvir Islam Tamim</div>
        
        <!-- Display User Info -->
        <div class="user-info">
            <p>‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡ß≥20 ‡¶π‡¶≤‡ßá ‡¶â‡¶á‡¶®‡ßç‡¶°‡ßã 100% ‡•§ ‡¶ï‡ßã‡¶® ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶≤‡ßá ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶ô‡ßç‡¶ó‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</span></p>
        </div>
 
        <div class="stats">
            <p>Watched Ads: <span id="watched-ads">0</span></p>
            <p>Earn Taka: <span id="earned-points">0</span></p>
        </div>
        <div class="progress-container">
            <div class="progress-circle">
                <span id="ads-progress">0%</span>
            </div>
            <!-- <div class="welcome-message" id="welcome-msg">üéâ Daily Task complete üéâ</div> -->
           
        </div>
        <p id="progress-message" style="text-align: center; font-weight: bold; margin-top: 10px;"></p>
        
            <div class="buttons">
                <button id="watch-ad-btn" onclick="watchAd()">Watch Ad</button>
                <a href="https://poawooptugroo.com/4/8887764">
                    <button>Diract Ads link </button>
                </a>
                <a href="https://t.me/freeincomeee2025">
                    <button>Payment Prove</button>
                </a>
                <a href="https://t.me/freeiincome2025">
                    <button>Join Community</button>
                </a>
                <button id="withdraw-btn" ">Withdraw</button>
                <button id="refund-btn">‚ùå ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶´‡ßá‡¶∞‡¶§ ‡¶¶‡¶ø‡¶®</button>
                <button id="referral-btn">üìé ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                <button id="show-referrals-btn">üìã ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
              

                <p id="referral-link"></p>
              

            </div>
       


       <!-- Withdraw Section -->

<div class="withdraw-section" id="withdraw-section">
    <h3 style="color: orange; margin-bottom: 15px;">Withdrawal Request</h3>
    <input type="number" id="withdraw-amount" placeholder="Enter to Withdraw Balance" />
    <select id="payment-method">
        <option value="manual">Manual</option>
        <option value="bkash">Bkash</option>
        <option value="nagad">Nagad</option>
        
    </select>
    <input type="text" id="your-name" placeholder="Enter your telegram User Name" />
    <input type="text" id="withdraw-phone" placeholder="Enter Phone Number" />
    <button onclick="withdrawPoints()">Withdraw</button>
    <p id="withdraw-status"></p>
</div>

<button id="show-history-btn">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡¶æ‡¶≤ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
    
<div id="custom-alert-container"></div>

<div id="history-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡¶æ‡¶≤ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø</h2>
        <div id="history-content"></div>
    </div>
</div>

    </div>
    <script src='//jagnaimsee.net/vignette.min.js' data-zone='8887062' data-sdk='show_8887062'></script> 
    <script async src="https://telegram.org/js/telegram-web-app.js"></script>
     
    <script>
        document.getElementById("withdraw-btn").addEventListener("click", function() {
          var withdrawSection = document.getElementById("withdraw-section");
          if (withdrawSection.classList.contains("show")) {
            withdrawSection.classList.remove("show");
          } else {
            withdrawSection.classList.add("show");
            withdrawSection.scrollIntoView({ behavior: "smooth" });
          }
        });

        document.addEventListener("DOMContentLoaded", function () {
            if (window.Telegram && window.Telegram.WebApp) {
                let tg = window.Telegram.WebApp;
                tg.expand(); // ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ

                let username = tg.initDataUnsafe?.user?.username;
                if (username) {
                    document.getElementById("username").innerHTML = 
                        `<span style="color: white;">Welcome Dear, </span><span class="blue-text">@${username}</span>`;
                } else {
                    document.getElementById("username").innerText = "No username found!";
                }
            } else {
                document.getElementById("username").innerText = "Telegram Web App not detected!";
                console.error("Telegram WebApp API ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø!");
            }
        });

      </script>
   
    <script src="/app1.js"></script>
</body>
</html>
